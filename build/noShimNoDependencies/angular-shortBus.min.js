!function(){define("p/shortBus",["shortBusModule","shortBus"],function(e,t){return e.provider("shortBus",function(){return{exchangeProviderHostname:null,exchangeProviderPort:null,routingInfoHostname:null,routingInfoPort:null,authenticationProviderHostname:null,authenticationProviderPort:null,fallbackTopoExchangeHostname:null,fallbackTopoExchangePort:null,busType:null,$get:function(){return t.getBus({exchangeProviderHostname:this.exchangeProviderHostname,exchangeProviderPort:this.exchangeProviderPort,routingInfoHostname:this.routingInfoHostname,routingInfoPort:this.routingInfoPort,authenticationProviderHostname:this.authenticationProviderHostname,authenticationProviderPort:this.authenticationProviderPort,fallbackTopoExchangeHostname:this.fallbackTopoExchangeHostname,fallbackTopoExchangePort:this.fallbackTopoExchangePort,busType:this.busType})}}})}),define("util/_deep",["underscore"],function(e){e.mixin({deep:function(t,n,o){var r,u=n.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").split("."),i=0,s=u.length;if(arguments.length>2){for(r=t,s--;s>i;)n=u[i++],t=t[n]=e.isObject(t[n])?t[n]:{};t[u[i]]=o,o=r}else{for(;null!=(t=t[u[i++]])&&s>i;);o=s>i?void 0:t}return o}})}),define("r/AmpEntity",["jquery","underscore","util/_deep"],function(e,t){var n;return n=function(){function n(e,t,n){var o,r;for(o in e)r=e[o],this[o]=r;this.getScope=function(){return n},this.getMessageBus=function(){return t}}return n.prototype._sendRpcMessage=function(n,o){var r,u;return null==o&&(o={}),u=t.isFunction(this.getScope()[n].outboundTransform)?this.getScope()[n].outboundTransform(this,o):this,r=this.getMessageBus().getResponseTo({request:u,timeout:1e4,outboundTopic:this.getScope()[n].outbound,inboundTopic:this.getScope()[n].inbound}),t.isFunction(this.getScope()[n].inboundTransform)&&(r=r.then(e.proxy(this.getScope()[n].inboundTransform,this.getScope()))),r},n.prototype._sendPubSubMessage=function(n,o){var r,u,i,s=this;return null==o&&(o={}),u=t.isFunction(this.getScope()[n].outboundTransform)?this.getScope()[n].outboundTransform(this,o):this,r=e.Deferred(),t.isString(this.getScope()[n].inbound)&&(i=this.getMessageBus().subscribe({getEventType:function(){return s.getScope()[n].inbound},handle:function(o){return r.resolve(o),t.isFunction(s.getScope()[n].inboundTransform)?r=r.then(e.proxy(s.getScope()[n].inboundTransform,s.getScope())):void 0},handleFailed:function(){return console.log("AmpEntity:_sendPubSubMessage>> failure received")}})),this.getMessageBus().publish(u,this.getScope()[n].outbound),r.promise()},n.prototype._messagingPicker=function(e,n){return"PUBSUB"===t.deep(this.getScope(),""+e+".type")?this._sendPubSubMessage(e,n):this._sendRpcMessage(e,n)},n.prototype.save=function(e){return null==e&&(e={}),this._messagingPicker("save",e)},n.prototype["delete"]=function(e){return null==e&&(e={}),this._messagingPicker("delete",e)},n.prototype.update=function(e){return null==e&&(e={}),this._messagingPicker("update",e)},n}()}),define("r/AmpResource",["angular","shortBusModule","underscore","./AmpEntity","jquery","p/shortBus","util/_deep"],function(e,t,n,o,r){return t.factory("ampResource",["$rootScope","shortBus",function(t,u){var i;return i=function(){function i(e){null==e&&(e={}),this.get=e.get,this.save=e.save,this["delete"]=e["delete"],this.update=e.update,this.queryIsArray=e.queryIsArray,this.type=e.type}return i.prototype.queryIsArray=!0,i.prototype.type="RPC",i.prototype._pubSubQuery=function(i,s){var a,c,h,p=this;return null==i&&(i={}),null==s&&(s=!0),a=s?[]:{},n.isString(this.get.inbound)&&(h=u.subscribe({getEventType:function(){return p.get.inbound},handle:function(i){var s,c,h;return c=r.Deferred().resolve(i),n.isFunction(p.get.inboundTransform)&&(c=c.then(p.get.inboundTransform)),s=function(e){return n.isArray(e)?n.map(e,function(e){return new o(e,u,p)}):new o(e,u,p)},c=c.then(s),h=function(n){return e.copy(n,a),t.$apply()},c.then(h)},handleFailed:function(){return console.log("PubSubResource:query>> failure received")}})),c=function(){return n.isFunction(p.get.outboundTransform)&&(i=p.get.outboundTransform(p,i)),u.publish(i,p.get.outbound)},n.isString(this.get.inbound)?h=h.then(c):c(),a},i.prototype._rpcQuery=function(r,i){var s,a,c=this;return null==r&&(r={}),null==i&&(i=!0),s=i?[]:{},n.isFunction(this.get.outboundTransform)&&(r=this.get.outboundTransform(this,r)),a=u.getResponseTo({request:r,timeout:100,outboundTopic:this.get.outbound,inboundTopic:this.get.inbound}),n.isFunction(this.get.inboundTransform)&&(a=a.then(this.get.inboundTransform)),a=a.then(function(e){return n.isArray(e)?n.map(e,function(e){return new o(e,u,c)}):new o(e,u,c)}),a.then(function(n){return e.copy(n,s),t.$apply()}),s},i.prototype.query=function(e){return null==e&&(e={}),"PUBSUB"===this.get.type?this._pubSubQuery(e,this.get.queryIsArray):this._rpcQuery(e,this.get.queryIsArray)},i.prototype.create=function(e){return new o(e,u,this)},i}()}])}),define("shortBusModule",["angular","p/shortBus","r/AmpEntity","r/AmpResource"],function(e){return e.module("shortBus",[])}),define(["shortBusModule"],function(e){return e})}();