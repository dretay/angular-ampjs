!function(){define("ngAmpjsModule",["angular"],function(e){return e.module("ngAmpjs",[])}),define("p/shortBus",["shortBus","ngAmpjsModule"],function(e,t){return t.provider("shortBus",function(){return{exchangeProviderHostname:null,exchangeProviderPort:null,routingInfoHostname:null,routingInfoPort:null,authenticationProviderHostname:null,authenticationProviderPort:null,fallbackTopoExchangeHostname:null,fallbackTopoExchangePort:null,busType:null,$get:function(){return e.getBus({exchangeProviderHostname:this.exchangeProviderHostname,exchangeProviderPort:this.exchangeProviderPort,routingInfoHostname:this.routingInfoHostname,routingInfoPort:this.routingInfoPort,authenticationProviderHostname:this.authenticationProviderHostname,authenticationProviderPort:this.authenticationProviderPort,fallbackTopoExchangeHostname:this.fallbackTopoExchangeHostname,fallbackTopoExchangePort:this.fallbackTopoExchangePort,busType:this.busType})}}})}),define("util/_deep",["underscore"],function(e){e.mixin({deep:function(t,n,o){var r,u=n.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").split("."),i=0,s=u.length;if(arguments.length>2){for(r=t,s--;s>i;)n=u[i++],t=t[n]=e.isObject(t[n])?t[n]:{};t[u[i]]=o,o=r}else{for(;null!=(t=t[u[i++]])&&s>i;);o=s>i?void 0:t}return o}})}),define("r/AmpEntity",["jquery","underscore","util/_deep"],function(e,t){var n;return n=function(){function n(e,t,n){var o,r;for(o in e)r=e[o],this[o]=r;this.getScope=function(){return n},this.getMessageBus=function(){return t}}return n.prototype._sendRpcMessage=function(n,o){var r,u;return null==o&&(o={}),u=t.isFunction(this.getScope()[n].outboundTransform)?this.getScope()[n].outboundTransform(this,o):this,r=this.getMessageBus().getResponseTo({request:u,timeout:1e4,outboundTopic:this.getScope()[n].outbound,inboundTopic:this.getScope()[n].inbound}),t.isFunction(this.getScope()[n].inboundTransform)&&(r=r.then(e.proxy(this.getScope()[n].inboundTransform,this.getScope()))),r},n.prototype._sendPubSubMessage=function(n,o){var r,u,i,s=this;return null==o&&(o={}),u=t.isFunction(this.getScope()[n].outboundTransform)?this.getScope()[n].outboundTransform(this,o):this,r=e.Deferred(),t.isString(this.getScope()[n].inbound)&&(i=this.getMessageBus().subscribe({getEventType:function(){return s.getScope()[n].inbound},handle:function(o){return r.resolve(o),t.isFunction(s.getScope()[n].inboundTransform)?r=r.then(e.proxy(s.getScope()[n].inboundTransform,s.getScope())):void 0},handleFailed:function(){return console.log("AmpEntity:_sendPubSubMessage>> failure received")}})),this.getMessageBus().publish(u,this.getScope()[n].outbound),r.promise()},n.prototype._messagingPicker=function(e,n){return"PUBSUB"===t.deep(this.getScope(),""+e+".type")?this._sendPubSubMessage(e,n):this._sendRpcMessage(e,n)},n.prototype.save=function(e){return null==e&&(e={}),this._messagingPicker("save",e)},n.prototype["delete"]=function(e){return null==e&&(e={}),this._messagingPicker("delete",e)},n.prototype.update=function(e){return null==e&&(e={}),this._messagingPicker("update",e)},n}()}),define("r/AmpResource",["angular","underscore","./AmpEntity","jquery","ngAmpjsModule","util/_deep","p/shortBus"],function(e,t,n,o,r){return r.factory("ampResource",["$rootScope","shortBus",function(r,u){var i;return i=function(){function i(e){null==e&&(e={}),this.get=e.get,this.save=e.save,this["delete"]=e["delete"],this.update=e.update,this.queryIsArray=e.queryIsArray,this.type=e.type}return i.prototype.queryIsArray=!0,i.prototype.type="RPC",i.prototype._pubSubQuery=function(i,s){var a,c,p,h=this;return null==i&&(i={}),null==s&&(s=!0),a=s?[]:{},t.isString(this.get.inbound)&&(p=u.subscribe({getEventType:function(){return h.get.inbound},handle:function(i){var s,c,p;return c=o.Deferred().resolve(i),t.isFunction(h.get.inboundTransform)&&(c=c.then(h.get.inboundTransform)),s=function(e){return t.isArray(e)?t.map(e,function(e){return new n(e,u,h)}):new n(e,u,h)},c=c.then(s),p=function(t){return e.copy(t,a),r.$apply()},c.then(p)},handleFailed:function(){return console.log("PubSubResource:query>> failure received")}})),c=function(){return t.isFunction(h.get.outboundTransform)&&(i=h.get.outboundTransform(h,i)),u.publish(i,h.get.outbound)},t.isString(this.get.inbound)?p=p.then(c):c(),a},i.prototype._rpcQuery=function(o,i){var s,a,c=this;return null==o&&(o={}),null==i&&(i=!0),s=i?[]:{},t.isFunction(this.get.outboundTransform)&&(o=this.get.outboundTransform(this,o)),a=u.getResponseTo({request:o,timeout:100,outboundTopic:this.get.outbound,inboundTopic:this.get.inbound}),t.isFunction(this.get.inboundTransform)&&(a=a.then(this.get.inboundTransform)),a=a.then(function(e){return t.isArray(e)?t.map(e,function(e){return new n(e,u,c)}):new n(e,u,c)}),a.then(function(t){return e.copy(t,s),r.$apply()}),s},i.prototype.query=function(e){return null==e&&(e={}),"PUBSUB"===this.get.type?this._pubSubQuery(e,this.get.queryIsArray):this._rpcQuery(e,this.get.queryIsArray)},i.prototype.create=function(e){return new n(e,u,this)},i}()}])}),define("ngAmpjs",["ngAmpjsModule","p/shortBus","r/AmpResource"],function(e){return e}),define(["ngAmpjs"],function(e){return e})}();